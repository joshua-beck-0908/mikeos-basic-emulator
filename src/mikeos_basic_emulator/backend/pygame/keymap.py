import pygame
from typing import NamedTuple

class KeyMapping(NamedTuple):
    regular: int
    shifted: int
    ctrl: int
    alt: int

# https://www.pygame.org/docs/ref/key.html
# https://stanislavs.org/helppc/scan_codes.html
pygame_key_to_int16: dict[int, KeyMapping] = {
    pygame.K_a: KeyMapping(0x1E61, 0x1E41, 0x1E01, 0x1E00),
    pygame.K_b: KeyMapping(0x3062, 0x3042, 0x3002, 0x3000),
    pygame.K_c: KeyMapping(0x2E63, 0x2E42, 0x2E03, 0x2E00),
    pygame.K_d: KeyMapping(0x2064, 0x2044, 0x2004, 0x2000),
    pygame.K_e: KeyMapping(0x1265, 0x1245, 0x1205, 0x1200),
    pygame.K_f: KeyMapping(0x2166, 0x2146, 0x2106, 0x2100),
    pygame.K_g: KeyMapping(0x2267, 0x2247, 0x2207, 0x2200),
    pygame.K_h: KeyMapping(0x2368, 0x2348, 0x2308, 0x2300),
    pygame.K_i: KeyMapping(0x1769, 0x1749, 0x1709, 0x1700),
    pygame.K_j: KeyMapping(0x246A, 0x244A, 0x240A, 0x2400),
    pygame.K_k: KeyMapping(0x256B, 0x254B, 0x250B, 0x2500),
    pygame.K_l: KeyMapping(0x266C, 0x264C, 0x260C, 0x2600),
    pygame.K_m: KeyMapping(0x326D, 0x324D, 0x320D, 0x3200),
    pygame.K_n: KeyMapping(0x316E, 0x314E, 0x310E, 0x3100),
    pygame.K_o: KeyMapping(0x186F, 0x184F, 0x180F, 0x1800),
    pygame.K_p: KeyMapping(0x1970, 0x1950, 0x1910, 0x1900),
    pygame.K_q: KeyMapping(0x1071, 0x1051, 0x1011, 0x1000),
    pygame.K_r: KeyMapping(0x1372, 0x1352, 0x1312, 0x1300),
    pygame.K_s: KeyMapping(0x1F73, 0x1F53, 0x1F13, 0x1F00),
    pygame.K_t: KeyMapping(0x1474, 0x1454, 0x1414, 0x1400),
    pygame.K_u: KeyMapping(0x1675, 0x1655, 0x1615, 0x1600),
    pygame.K_v: KeyMapping(0x2F76, 0x2F56, 0x2F16, 0x2F00),
    pygame.K_w: KeyMapping(0x1177, 0x1157, 0x1117, 0x1100),
    pygame.K_x: KeyMapping(0x2D78, 0x2D58, 0x2D18, 0x2D00),
    pygame.K_y: KeyMapping(0x1579, 0x1559, 0x1519, 0x1500),
    pygame.K_z: KeyMapping(0x2C7A, 0x2C5A, 0x2C1A, 0x2C00),



    pygame.K_1: KeyMapping(0x0231, 0x0221, 0x0000, 0x7800),
    pygame.K_2: KeyMapping(0x0332, 0x0340, 0x0300, 0x7900),
    pygame.K_3: KeyMapping(0x0433, 0x0423, 0x0000, 0x7A00),
    pygame.K_4: KeyMapping(0x0534, 0x0524, 0x0000, 0x7B00),
    pygame.K_5: KeyMapping(0x0635, 0x0625, 0x0000, 0x7C00),
    pygame.K_6: KeyMapping(0x0736, 0x075E, 0x071E, 0x7D00),
    pygame.K_7: KeyMapping(0x0837, 0x0826, 0x0000, 0x7E00),
    pygame.K_8: KeyMapping(0x0938, 0x092A, 0x0000, 0x7F00),
    pygame.K_9: KeyMapping(0x0A39, 0x0A28, 0x0000, 0x8000),
    pygame.K_0: KeyMapping(0x0B30, 0x0B29, 0x0000, 0x8100),
    
    pygame.K_MINUS: KeyMapping(0x0C2D, 0x0C5F, 0x0C1F, 0x8200),
    pygame.K_EQUALS: KeyMapping(0x0D3D, 0x0D2B, 0x0000, 0x8300),
    pygame.K_LEFTBRACKET: KeyMapping(0x1A5B, 0x1A7B, 0x1A1B, 0x1A00),
    pygame.K_RIGHTBRACKET: KeyMapping(0x1B5D, 0x1B7D, 0x1B1D, 0x1B00),
    pygame.K_SEMICOLON: KeyMapping(0x273B, 0x273A, 0x0000, 0x2700),
    pygame.K_QUOTE: KeyMapping(0x2827, 0x2822, 0x0000, 0x0000),
    pygame.K_BACKQUOTE: KeyMapping(0x2960, 0x297E, 0x0000, 0x0000),
    pygame.K_BACKSLASH: KeyMapping(0x2B5C, 0x2B7C, 0x2B1C, 0x2600),
    pygame.K_COMMA: KeyMapping(0x332C, 0x333C, 0x0000, 0x0000),
    pygame.K_PERIOD: KeyMapping(0x342E, 0x343E, 0x0000, 0x0000),
    pygame.K_SLASH: KeyMapping(0x352F, 0x353F, 0x0000, 0x0000),
    pygame.K_F1: KeyMapping(0x3B00, 0x5400, 0x5E00, 0x6800),
    pygame.K_F2: KeyMapping(0x3C00, 0x5500, 0x5F00, 0x6900),
    pygame.K_F3: KeyMapping(0x3D00, 0x5600, 0x6000, 0x6A00),
    pygame.K_F4: KeyMapping(0x3E00, 0x5700, 0x6100, 0x6B00),
    pygame.K_F5: KeyMapping(0x3F00, 0x5800, 0x6200, 0x6C00),
    pygame.K_F6: KeyMapping(0x4000, 0x5900, 0x6300, 0x6D00),
    pygame.K_F7: KeyMapping(0x4100, 0x5A00, 0x6400, 0x6E00),
    pygame.K_F8: KeyMapping(0x4200, 0x5B00, 0x6500, 0x6F00),
    pygame.K_F9: KeyMapping(0x4300, 0x5C00, 0x6600, 0x7000),
    pygame.K_F10: KeyMapping(0x4400, 0x5D00, 0x6700, 0x7100),
    pygame.K_F11: KeyMapping(0x8500, 0x8700, 0x8900, 0x8B00),
    pygame.K_F12: KeyMapping(0x8600, 0x8800, 0x8A00, 0x8C00),
    pygame.K_BACKSPACE: KeyMapping(0x0E08, 0x0E08, 0x0E7F, 0x0E00),
    pygame.K_TAB: KeyMapping(0x0F09, 0x0F00, 0x9400, 0xA500),
    pygame.K_RETURN: KeyMapping(0x1C0D, 0x1C0D, 0x1C0A, 0xA600),
    pygame.K_ESCAPE: KeyMapping(0x011B, 0x011B, 0x011B, 0x0100),
    pygame.K_SPACE: KeyMapping(0x3920, 0x3920, 0x3920, 0x3920),
    pygame.K_DELETE: KeyMapping(0x5300, 0x532E, 0x9300, 0xA300),
    pygame.K_UP: KeyMapping(0x48E0, 0x4838, 0x8D00, 0x9800),
    pygame.K_DOWN: KeyMapping(0x50E0, 0x5032, 0x9100, 0xA000),
    pygame.K_LEFT: KeyMapping(0x4BE0, 0x4B34, 0x7300, 0x9B00),
    pygame.K_RIGHT: KeyMapping(0x4DE0, 0x4D36, 0x7400, 0x9D00)
}

basic_special_cases: dict[int, int] = {
    0x48E0: 1,  # Up arrow
    0x50E0: 2,  # Down arrow
    0x4BE0: 3,  # Left arrow
    0x4DE0: 4,  # Right arrow
}